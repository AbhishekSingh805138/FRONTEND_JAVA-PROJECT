<div class="d-flex items-center justify-between mb-3">
  <h2 class="m-0">My Accounts</h2>
  <button mat-raised-button color="primary" (click)="startCreate()" *ngIf="!creating">Create Account</button>
  <div *ngIf="creating">
    <button mat-stroked-button color="primary" (click)="submitCreate()" [disabled]="form.invalid">Save</button>
    <button mat-button (click)="cancelCreate()">Cancel</button>
  </div>
</div>

<div *ngIf="creating" class="mb-4">
  <form [formGroup]="form" class="form row">
    <mat-form-field appearance="outline" class="w-25 mr-2">
      <mat-label>Account Type</mat-label>
      <mat-select formControlName="accountType">
        <mat-option value="SAVINGS">SAVINGS</mat-option>
        <mat-option value="CURRENT">CURRENT</mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field appearance="outline" class="w-25 mr-2">
      <mat-label>Opening Balance</mat-label>
      <input matInput type="number" formControlName="accountBalance" />
    </mat-form-field>
    <mat-form-field appearance="outline" class="w-25 mr-2">
      <mat-label>User ID</mat-label>
      <input matInput type="number" formControlName="userId" />
    </mat-form-field>
    <mat-form-field appearance="outline" class="w-25 mr-2">
      <mat-label>Secret Password</mat-label>
      <input matInput type="text" formControlName="secretPassword" />
    </mat-form-field>
  </form>
</div>

<div *ngIf="loading">Loading...</div>
<div *ngIf="!loading && error" class="text-warn">{{error}}</div>
 <table mat-table [dataSource]="rows" *ngIf="!loading && rows.length">
  <ng-container matColumnDef="id"><th mat-header-cell *matHeaderCellDef>ID</th><td mat-cell *matCellDef="let r">{{r.id}}</td></ng-container>
  <ng-container matColumnDef="type"><th mat-header-cell *matHeaderCellDef>Type</th><td mat-cell *matCellDef="let r">{{r.accountType}}</td></ng-container>
  <ng-container matColumnDef="bal"><th mat-header-cell *matHeaderCellDef>Balance</th><td mat-cell *matCellDef="let r">{{r.balance | number:'1.2-2'}}</td></ng-container>
  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="open(row)" style="cursor:pointer"></tr>
 </table>
<div *ngIf="!loading && !error && !rows.length">No accounts found.</div>
