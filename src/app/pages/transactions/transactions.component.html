<div class="d-flex items-center justify-between mb-3">
  <h2 class="m-0">My Transactions</h2>
  <button mat-raised-button color="primary" (click)="startCreate()" *ngIf="!creating">Create Transaction</button>
  <div *ngIf="creating">
    <button mat-stroked-button color="primary" (click)="submitCreate()" [disabled]="form.invalid">Save</button>
    <button mat-button (click)="cancelCreate()">Cancel</button>
  </div>
  
  
  
  
  
  
</div>

<div *ngIf="creating" class="mb-4">
  <form [formGroup]="form" class="form row">
    <mat-form-field appearance="outline" class="w-25 mr-2">
      <mat-label>From Account ID</mat-label>
      <input matInput type="number" formControlName="frmAccountId" />
    </mat-form-field>
    <mat-form-field appearance="outline" class="w-25 mr-2">
      <mat-label>To Account ID</mat-label>
      <input matInput type="number" formControlName="toAccountId" />
    </mat-form-field>
    <mat-form-field appearance="outline" class="w-25 mr-2">
      <mat-label>Amount</mat-label>
      <input matInput type="number" formControlName="amount" />
    </mat-form-field>
    <mat-form-field appearance="outline" class="w-25 mr-2">
      <mat-label>User ID</mat-label>
      <input matInput type="number" formControlName="userId" />
    </mat-form-field>
  </form>
</div>

<div *ngIf="loading">Loading...</div>
<div *ngIf="!loading && error" class="text-warn">{{error}}</div>

<table mat-table [dataSource]="rows" *ngIf="!loading && rows.length">
  <ng-container matColumnDef="id"><th mat-header-cell *matHeaderCellDef>ID</th><td mat-cell *matCellDef="let r">{{r.id}}</td></ng-container>
  <ng-container matColumnDef="date"><th mat-header-cell *matHeaderCellDef>Date</th><td mat-cell *matCellDef="let r">{{r.date_transaction | date:'short'}}</td></ng-container>
  <ng-container matColumnDef="from"><th mat-header-cell *matHeaderCellDef>From</th><td mat-cell *matCellDef="let r">{{r.frmAccountId}}</td></ng-container>
  <ng-container matColumnDef="to"><th mat-header-cell *matHeaderCellDef>To</th><td mat-cell *matCellDef="let r">{{r.toAccountId}}</td></ng-container>
  <ng-container matColumnDef="amt"><th mat-header-cell *matHeaderCellDef>Amount</th><td mat-cell *matCellDef="let r">{{r.amount | number:'1.2-2'}}</td></ng-container>
  <ng-container matColumnDef="actions">
    <th mat-header-cell *matHeaderCellDef>Actions</th>
    <td mat-cell *matCellDef="let r">
      <button mat-stroked-button color="warn" (click)="delete(r, $event)">Delete</button>
    </td>
  </ng-container>
  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
</table>

<div *ngIf="!loading && !error && !rows.length">No transactions found.</div>
